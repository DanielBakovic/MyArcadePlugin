!function(e){function t(t,i,s){for(var n=1;n<this.series.length;n++)if(!this.series[n]._previousSeries.length)for(var r=0;r<n;r++)this.series[n].renderer.constructor==e.jqplot.DonutRenderer&&this.series[r].renderer.constructor==e.jqplot.DonutRenderer&&this.series[n]._previousSeries.push(this.series[r]);for(n=0;n<this.series.length;n++)this.series[n].renderer.constructor==e.jqplot.DonutRenderer&&(this.series[n]._numberSeries=this.series.length,this.series[n].highlightMouseOver&&(this.series[n].highlightMouseDown=!1))}function i(t){for(var i=0;i<this.series.length;i++)this.series[i].seriesColors=this.seriesColors,this.series[i].colorGenerator=e.jqplot.colorGenerator}function s(e,t,i){var s=e.series[t],n=e.plugins.donutRenderer.highlightCanvas;n._ctx.clearRect(0,0,n._ctx.canvas.width,n._ctx.canvas.height),s._highlightedPoint=i,e.plugins.donutRenderer.highlightedSeriesIndex=t,s.renderer.drawSlice.call(s,n._ctx,s._sliceAngles[i][0],s._sliceAngles[i][1],s.highlightColors[i],!1)}function n(e){var t=e.plugins.donutRenderer.highlightCanvas;t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var i=0;i<e.series.length;i++)e.series[i]._highlightedPoint=null;e.plugins.donutRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight")}function r(e,t,i,r,h){if(r){var a=[r.seriesIndex,r.pointIndex,r.data],o=jQuery.Event("jqplotDataMouseOver");if(o.pageX=e.pageX,o.pageY=e.pageY,h.target.trigger(o,a),h.series[a[0]].highlightMouseOver&&(a[0]!=h.plugins.donutRenderer.highlightedSeriesIndex||a[1]!=h.series[a[0]]._highlightedPoint)){var l=jQuery.Event("jqplotDataHighlight");l.which=e.which,l.pageX=e.pageX,l.pageY=e.pageY,h.target.trigger(l,a),s(h,a[0],a[1])}}else null==r&&n(h)}function h(e,t,i,r,h){if(r){var a=[r.seriesIndex,r.pointIndex,r.data];if(h.series[a[0]].highlightMouseDown&&(a[0]!=h.plugins.donutRenderer.highlightedSeriesIndex||a[1]!=h.series[a[0]]._highlightedPoint)){var o=jQuery.Event("jqplotDataHighlight");o.which=e.which,o.pageX=e.pageX,o.pageY=e.pageY,h.target.trigger(o,a),s(h,a[0],a[1])}}else null==r&&n(h)}function a(e,t,i,s,r){var h=r.plugins.donutRenderer.highlightedSeriesIndex;null!=h&&r.series[h].highlightMouseDown&&n(r)}function o(e,t,i,s,n){if(s){var r=[s.seriesIndex,s.pointIndex,s.data],h=jQuery.Event("jqplotDataClick");h.which=e.which,h.pageX=e.pageX,h.pageY=e.pageY,n.target.trigger(h,r)}}function l(e,t,i,s,r){if(s){var h=[s.seriesIndex,s.pointIndex,s.data],a=r.plugins.donutRenderer.highlightedSeriesIndex;null!=a&&r.series[a].highlightMouseDown&&n(r);var o=jQuery.Event("jqplotDataRightClick");o.which=e.which,o.pageX=e.pageX,o.pageY=e.pageY,r.target.trigger(o,h)}}function d(){this.plugins.donutRenderer&&this.plugins.donutRenderer.highlightCanvas&&(this.plugins.donutRenderer.highlightCanvas.resetCanvas(),this.plugins.donutRenderer.highlightCanvas=null),this.plugins.donutRenderer={highlightedSeriesIndex:null},this.plugins.donutRenderer.highlightCanvas=new e.jqplot.GenericCanvas;var t=e(this.targetId+" .jqplot-data-label");t.length?e(t[0]).before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-donutRenderer-highlight-canvas",this._plotDimensions,this)):this.eventCanvas._elem.before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-donutRenderer-highlight-canvas",this._plotDimensions,this));this.plugins.donutRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(e){n(e.data.plot)})}e.jqplot.DonutRenderer=function(){e.jqplot.LineRenderer.call(this)},e.jqplot.DonutRenderer.prototype=new e.jqplot.LineRenderer,e.jqplot.DonutRenderer.prototype.constructor=e.jqplot.DonutRenderer,e.jqplot.DonutRenderer.prototype.init=function(s,n){if(this.diameter=null,this.innerDiameter=null,this.thickness=null,this.padding=20,this.sliceMargin=0,this.ringMargin=null,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,this.totalLabel=!1,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.4,this.dataLabelNudge=0,this.startAngle=0,this.tickRenderer=e.jqplot.DonutTickRenderer,this._drawData=!0,this._type="donut",s.highlightMouseDown&&null==s.highlightMouseOver&&(s.highlightMouseOver=!1),e.extend(!0,this,s),null!=this.diameter&&(this.diameter=this.diameter-this.sliceMargin),this._diameter=null,this._innerDiameter=null,this._radius=null,this._innerRadius=null,this._thickness=null,this._previousSeries=[],this._numberSeries=1,this._sliceAngles=[],this._highlightedPoint=null,0==this.highlightColors.length)for(var g=0;g<this.seriesColors.length;g++){for(var u=e.jqplot.getColorComponents(this.seriesColors[g]),p=[u[0],u[1],u[2]],c=p[0]+p[1]+p[2],f=0;f<3;f++)p[f]=c>570?.8*p[f]:p[f]+.3*(255-p[f]),p[f]=parseInt(p[f],10);this.highlightColors.push("rgb("+p[0]+","+p[1]+","+p[2]+")")}n.postParseOptionsHooks.addOnce(i),n.postInitHooks.addOnce(t),n.eventListenerHooks.addOnce("jqplotMouseMove",r),n.eventListenerHooks.addOnce("jqplotMouseDown",h),n.eventListenerHooks.addOnce("jqplotMouseUp",a),n.eventListenerHooks.addOnce("jqplotClick",o),n.eventListenerHooks.addOnce("jqplotRightClick",l),n.postDrawHooks.addOnce(d)},e.jqplot.DonutRenderer.prototype.setGridData=function(e){var t=[],i=[],s=(this.startAngle,Math.PI,0);this._drawData=!1;for(r=0;r<this.data.length;r++)0!=this.data[r][1]&&(this._drawData=!0),t.push(this.data[r][1]),i.push([this.data[r][0]]),r>0&&(t[r]+=t[r-1]),s+=this.data[r][1];for(var n=2*Math.PI/t[t.length-1],r=0;r<t.length;r++)i[r][1]=t[r]*n,i[r][2]=this.data[r][1]/s;this.gridData=i},e.jqplot.DonutRenderer.prototype.makeGridData=function(e,t){var i=[],s=[],n=0;this.startAngle,Math.PI;this._drawData=!1;for(h=0;h<e.length;h++)0!=this.data[h][1]&&(this._drawData=!0),i.push(e[h][1]),s.push([e[h][0]]),h>0&&(i[h]+=i[h-1]),n+=e[h][1];for(var r=2*Math.PI/i[i.length-1],h=0;h<i.length;h++)s[h][1]=i[h]*r,s[h][2]=e[h][1]/n;return this._totalAmount=n,s},e.jqplot.DonutRenderer.prototype.drawSlice=function(e,t,i,s,n){function r(){i>6.282+this.startAngle&&(i=6.282+this.startAngle,t>i&&(t=6.281+this.startAngle)),t>=i||(e.beginPath(),e.fillStyle=s,e.strokeStyle=s,e.arc(0,0,h,t,i,!1),e.lineTo(a*Math.cos(i),a*Math.sin(i)),e.arc(0,0,a,i,t,!0),e.closePath(),o?e.fill():e.stroke())}var h=this._diameter/2,a=h-this._thickness,o=this.fill;if(e.save(),e.translate(this._center[0],this._center[1]),n)for(l=0;l<this.shadowDepth;l++)e.save(),e.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),r();else r();if(n)for(var l=0;l<this.shadowDepth;l++)e.restore();e.restore()},e.jqplot.DonutRenderer.prototype.draw=function(t,i,s,n){var r=void 0!=s?s:{},h=0,a=0,o=1;if(s.legendInfo&&"insideGrid"==s.legendInfo.placement){var l=s.legendInfo;switch(l.location){case"nw":case"w":case"sw":h=l.width+l.xoffset;break;case"ne":case"e":case"se":h=l.width+l.xoffset,o=-1;break;case"n":a=l.height+l.yoffset;break;case"s":a=l.height+l.yoffset,o=-1}}void 0!=r.shadow?r.shadow:this.shadow,void 0!=r.showLine?r.showLine:this.showLine,void 0!=r.fill?r.fill:this.fill;for(var d=parseInt(t.canvas.style.width),g=parseInt(t.canvas.style.height),u=d-h-2*this.padding,p=g-a-2*this.padding,c=Math.min(u,p),f=c,v=null==this.ringMargin?2*this.sliceMargin:this.ringMargin,m=0;m<this._previousSeries.length;m++)f-=2*this._previousSeries[m]._thickness+2*v;if(this._diameter=this.diameter||f,null!=this.innerDiameter){var j=this._numberSeries>1&&this.index>0?this._previousSeries[0]._diameter:this._diameter;this._thickness=this.thickness||(j-this.innerDiameter-2*v*this._numberSeries)/this._numberSeries/2}else this._thickness=this.thickness||c/2/(this._numberSeries+1)*.85;if(this._diameter<6)e.jqplot.log("Diameter of donut too small, not rendering.");else{this._radius=this._diameter/2;this._innerRadius=this._radius-this._thickness;var _=this.startAngle/180*Math.PI;if(this._center=[(d-o*h)/2+o*h,(g-o*a)/2+o*a],this.shadow)for(var D="rgba(0,0,0,"+this.shadowAlpha+")",m=0;m<i.length;m++){w=0==m?_:i[m-1][1]+_;w+=this.sliceMargin/180*Math.PI,this.renderer.drawSlice.call(this,t,w,i[m][1]+_,D,!0)}for(m=0;m<i.length;m++){var w=0==m?_:i[m-1][1]+_;w+=this.sliceMargin/180*Math.PI;var R=i[m][1]+_;if(this._sliceAngles.push([w,R]),this.renderer.drawSlice.call(this,t,w,R,this.seriesColors[m],!1),this.showDataLabels&&100*i[m][2]>=this.dataLabelThreshold){var q,b,x=(w+R)/2;"label"==this.dataLabels?(q=this.dataLabelFormatString||"%s",b=e.jqplot.sprintf(q,i[m][0])):"value"==this.dataLabels?(q=this.dataLabelFormatString||"%d",b=e.jqplot.sprintf(q,this.data[m][1])):"percent"==this.dataLabels?(q=this.dataLabelFormatString||"%d%%",b=e.jqplot.sprintf(q,100*i[m][2])):this.dataLabels.constructor==Array&&(q=this.dataLabelFormatString||"%s",b=e.jqplot.sprintf(q,this.dataLabels[m]));var M=this._innerRadius+this._thickness*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,k=this._center[0]+Math.cos(x)*M+this.canvas._offsets.left,L=this._center[1]+Math.sin(x)*M+this.canvas._offsets.top,C=e('<span class="jqplot-donut-series jqplot-data-label" style="position:absolute;">'+b+"</span>").insertBefore(n.eventCanvas._elem);k-=C.width()/2,L-=C.height()/2,k=Math.round(k),L=Math.round(L),C.css({left:k,top:L})}}this.totalLabel&&e('<div class="jqplot-data-label" style="position:absolute">'+this._totalAmount+"</div>").insertAfter(n.eventCanvas._elem).css({left:this._center[0],top:this._center[1]})}},e.jqplot.DonutAxisRenderer=function(){e.jqplot.LinearAxisRenderer.call(this)},e.jqplot.DonutAxisRenderer.prototype=new e.jqplot.LinearAxisRenderer,e.jqplot.DonutAxisRenderer.prototype.constructor=e.jqplot.DonutAxisRenderer,e.jqplot.DonutAxisRenderer.prototype.init=function(t){this.tickRenderer=e.jqplot.DonutTickRenderer,e.extend(!0,this,t),this._dataBounds={min:0,max:100},this.min=0,this.max=100,this.showTicks=!1,this.ticks=[],this.showMark=!1,this.show=!1},e.jqplot.DonutLegendRenderer=function(){e.jqplot.TableLegendRenderer.call(this)},e.jqplot.DonutLegendRenderer.prototype=new e.jqplot.TableLegendRenderer,e.jqplot.DonutLegendRenderer.prototype.constructor=e.jqplot.DonutLegendRenderer,e.jqplot.DonutLegendRenderer.prototype.init=function(t){this.numberRows=null,this.numberColumns=null,e.extend(!0,this,t)},e.jqplot.DonutLegendRenderer.prototype.draw=function(){if(this.show){var t=this._series,i="position:absolute;";i+=this.background?"background:"+this.background+";":"",i+=this.border?"border:"+this.border+";":"",i+=this.fontSize?"font-size:"+this.fontSize+";":"",i+=this.fontFamily?"font-family:"+this.fontFamily+";":"",i+=this.textColor?"color:"+this.textColor+";":"",i+=null!=this.marginTop?"margin-top:"+this.marginTop+";":"",i+=null!=this.marginBottom?"margin-bottom:"+this.marginBottom+";":"",i+=null!=this.marginLeft?"margin-left:"+this.marginLeft+";":"",i+=null!=this.marginRight?"margin-right:"+this.marginRight+";":"",this._elem=e('<table class="jqplot-table-legend" style="'+i+'"></table>');var s,n,r=t[0],h=new e.jqplot.ColorGenerator(r.seriesColors);if(r.show){var a=r.data;this.numberRows?(s=this.numberRows,n=this.numberColumns?this.numberColumns:Math.ceil(a.length/s)):this.numberColumns?(n=this.numberColumns,s=Math.ceil(a.length/this.numberColumns)):(s=a.length,n=1);var o,l,d,g,u,p,c,f,v=0;for(o=0;o<s;o++)for(d=e('<tr class="jqplot-table-legend"></tr>').appendTo(this._elem),l=0;l<n;l++)v<a.length&&(p=this.labels[v]||a[v][0].toString(),f=h.next(),c=o>0?this.rowSpacing:"0",g=e('<td class="jqplot-table-legend" style="text-align:center;padding-top:'+c+';"><div><div class="jqplot-table-legend-swatch" style="border-color:'+f+';"></div></div></td>'),u=e('<td class="jqplot-table-legend" style="padding-top:'+c+';"></td>'),this.escapeHtml?u.text(p):u.html(p),g.appendTo(d),u.appendTo(d),!0),v++}}return this._elem};e.jqplot.preInitHooks.push(function(t,i,s){(s=s||{}).axesDefaults=s.axesDefaults||{},s.legend=s.legend||{},s.seriesDefaults=s.seriesDefaults||{};var n=!1;if(s.seriesDefaults.renderer==e.jqplot.DonutRenderer)n=!0;else if(s.series)for(var r=0;r<s.series.length;r++)s.series[r].renderer==e.jqplot.DonutRenderer&&(n=!0);n&&(s.axesDefaults.renderer=e.jqplot.DonutAxisRenderer,s.legend.renderer=e.jqplot.DonutLegendRenderer,s.legend.preDraw=!0,s.seriesDefaults.pointLabels={show:!1})}),e.jqplot.DonutTickRenderer=function(){e.jqplot.AxisTickRenderer.call(this)},e.jqplot.DonutTickRenderer.prototype=new e.jqplot.AxisTickRenderer,e.jqplot.DonutTickRenderer.prototype.constructor=e.jqplot.DonutTickRenderer}(jQuery);